= Running developer's [.mark]#blog# directly from an IDE[.red]^*^
:event-name: GR8Conf EU 2019, May 27th - 29th // #GR8Conf
:event-logo: gr8conf-2019.svg
:twitter: @wololock
:revnumber: {project-version}
:imagesdir: images
:sourcedir: ../java
:customcss: css/custom.css
:highlightjs-theme: css/androidstudio.min.css
:listing-caption: Listing
:bg1: #666
:bg2: #3D749C

[.lora.small]
([.red]#*# or any text editor of your choice)

[%notitle]
== Introduction

image::vincent-tweet.png[]

[.small]
https://twitter.com/vvoyer/status/1087705536714412032

[.logos.stretch]
== !

[.logo.git]
image::logos/git.png[height=96]
[.logo.github]
image::logos/github.png[height=160]
[.logo.asciidoctor]
image::logos/asciidoctor.png[height=128]
[.logo.idea]
image::logos/idea.png[height=128]
[.logo.travis]
image::logos/travis.png[height=128]
[.logo.hexo]
image::logos/hexo.png[height=128]
[.logo.cloudflare]
image::logos/cloudflare.png[height=128]


[.stretch.whoami]
== whoami

[.author.animation-slide-left]
image::wololock.jpg[scaledwidth=20%]

[.lora.animation-slide-bottom.text-left.margin-left-200.font-3rem]
_Hello, my name is_ +
_[.mark]**Szymon Stepniak**_


[.animation-slide-right.text-left.margin-left-200.margin-top-30]
I blog @ https://e.printstacktrace.blog[e.printstacktrace.blog] +
Continuous Delivery Architect @ image:upwork.jpg[height=32,role="upwork"] +
icon:twitter[] @wololock

== What does "blogging [.mark]**from IDE**" exactly mean?

[.lora]
Let's explore the main ingredients

== Part 1: the [.mark]#source code#

[.lora]
**Everything** `icon:file-text-o[] icon:file-image-o[] icon:gears[]` is the source code...

[%notitle,background-color="{bg2}"]
== Git

[.lora.large]
\... and we use icon:github[role="black x-large"] to control it!

[%notitle,background-color="{bg1}",transition="none"]
== Blog template is a source code

.Directory structure of the `themes/` folder
[source,bash,subs="attributes,quotes"]
----
$ tree -L 3 themes
**[.purple]#themes#**
â””â”€â”€ **[.purple]#mytheme#**
    â”œâ”€â”€ **[.purple]#layout#**
    â”‚Â Â  â”œâ”€â”€ 404.jade
    â”‚Â Â  â”œâ”€â”€ archive.jade
    â”‚Â Â  â”œâ”€â”€ category.jade
    â”‚Â Â  â”œâ”€â”€ index.jade
    â”‚Â Â  â”œâ”€â”€ ...
    â”‚Â Â  â”œâ”€â”€ post.jade
    â”‚Â Â  â””â”€â”€ tag.jade
    â””â”€â”€ **[.purple]#source#**
        â”œâ”€â”€ **[.purple]#css#**
        â”œâ”€â”€ **[.purple]#img#**
        â””â”€â”€ **[.purple]#js#**

7 directories, 9 files
----

[%notitle,background-color="{bg1}",transition="none"]
== Blog posts are source code

.Directory structure of the `source/` folder
[source,bash,subs="quotes"]
----
$ tree -L 4 -P "*.adoc" source
**[.purple]#source#**
â”œâ”€â”€ 404.adoc
â”œâ”€â”€ **[.purple]#_drafts#**
â”œâ”€â”€ **[.purple]#_posts#**
â”‚Â Â  â”œâ”€â”€ ...
â”‚Â Â  â”œâ”€â”€ **[.purple]#2018#**
â”‚Â Â  â”‚Â Â  â””â”€â”€ ...
â”‚Â Â  â””â”€â”€ **[.purple]#2019#**
â”‚Â Â      â””â”€â”€ **[.purple]#04#**
â”‚Â Â          â”œâ”€â”€ debugging-teams-book-review.adoc
â”‚Â Â          â”œâ”€â”€ graalvm-heap-size-of-native-image-how-to-set-it.adoc
â”‚Â Â          â””â”€â”€ spock-random-order-of-tests-how-to.adoc
â””â”€â”€ **[.purple]#privacy-policy#**
    â””â”€â”€ index.adoc

22 directories, 42 files
----

[%notitle,background-color="{bg1}",transition="none"]
== Blog configuration is a code

.The content of `_config.yml` file
[source,yaml]
----
# Date / Time format
date_format: YYYY-MM-DD
time_format: HH:mm:ss

# Pagination
per_page: 10
pagination_dir: page

# Extensions
theme: mytheme

disqus_shortname: eprintstacktrace

# Deployment
deploy:
  type: git
  repo: git@github.com:wololock/wololock.github.io.git
  branch: master

all_minifier: true
----

[transition="slide"]
== Static site generator

[.lora]
A [.mark]#"compiler"# that produces the blog output

[%notitle,background-color="{bg1}",transition="none"]
== AsciiDoc example

.An example of AsciiDoc file
[source,asciidoc,role="small",subs="attributes"]
----
I love https://sdkman.io/[*_SDKMAN!_*]. It made using multiple different Java distributions in a single operating system much more
comfortable. You can install Java across different versions (from 6 to 13.EA) and different vendors (OpenJDK,
Oracle, Zulu, Corretto or GraalVM CE to name a few). Switching between those versions is as simple as executing
a single `sdk use java {version}` command and you are ready to use whatever Java you want. However, not all
Java versions are available by default, but luckily, _SDKMAN!_ has a simple solution to this problem.

++++
&lt;!-- more --&gt;
++++

== Installing GraalVM EE 1.0.0-RC14

I run some experiments with https://www.graalvm.org/[GraalVM] and the only version I can install directly with
_SDKMAN!_ is GraalVM Community Edition. However, there is also GraalVM Enterprise Edition which provides some
additional features, like improved performance. The main reason GraalVM EE is not available in _SDKMAN!_ is
that it is distributed over OTN (Oracle Technology Network) only, so you need to accept OTN license agreementfootnote:[https://www.oracle.com/technetwork/licenses/early-adopter-license-2299792.html]
and log in to start the file download. OK, so I downloaded *graalvm-ee-1.0.0-rc14-linux-amd64.tar.gz* file
successfully. What's next?

Let's start with the extracting files from the downloaded archive.

[source,bash]
&dash;&dash;&dash;&dash;
$ tar -xvf graalvm-ee-1.0.0-rc14-linux-amd64.tar.gz
&dash;&dash;&dash;&dash;

After extracting all files, we can install local Java distribution with the following command.
----

[%notitle,background-color="{bg1}",transition="none"]
== Generated HTML

.Generated HTML file from AsciiDoc
[source,html,role="small"]
----
<article role="main" class="blog-post">
<div class="paragraph">
    <p>I love <a href="https://sdkman.io/" target="_blank" rel="noopener"><strong><em>SDKMAN!</em></strong></a>. It made using multiple different Java distributions in a single operating system much more comfortable. You can install Java across different versions (from 6 to 13.EA) and different vendors (OpenJDK, Oracle, Zulu, Corretto or GraalVM CE to name a few). Switching between those versions is as simple as executing a single
    <code>sdk use java {version}</code> command and you are ready to use whatever Java you want. However, not all Java versions are available by default, but luckily, <em>SDKMAN!</em> has a simple solution to this problem.
    </p>
</div>
<a id="more"></a>
<div class="sect1">
    <h2>Installing GraalVM EE 1.0.0-RC14</h2>
    <div class="sectionbody">
        <div class="paragraph">
            <p>I run some experiments with <a href="https://www.graalvm.org/" target="_blank" rel="noopener">GraalVM</a> and the only version I can install directly with <em>SDKMAN!</em> is GraalVM Community Edition. However, there is also GraalVM Enterprise Edition which provides some additional features, like improved performance.
            The main reason GraalVM EE is not available in <em>SDKMAN!</em> is that it is distributed over OTN (Oracle Technology Network) only, so you need to accept OTN license agreement<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> and log in to start the file download. OK, so I downloaded <strong>graalvm-ee-1.0.0-rc14-linux-amd64.tar.gz</strong> file successfully. What&#8217;s next?</p></div><div class="paragraph"><p>Let&#8217;s start with the extracting files from the downloaded archive.
            </p>
        </div>
        <div class="listingblock">
            <div class="content">
                <pre class="highlightjs highlight">
                    <code class="language-bash hljs" data-lang="bash">$ tar -xvf graalvm-ee-1.0.0-rc14-linux-amd64.tar.gz</code>
                </pre>
            </div>
        </div>
        <div class="paragraph"><p>After extracting all files, we can install local Java distribution with the following command.</p></div>
    </div>
</div>
</article>
----

[%notitle,transition="none"]
== Generated blog post example

image::generated-blog-post.png[background,cover]

[%notitle,transition="none"]
== Hexo

image::hexo.png[background,cover]

[transition="slide"]
== [.mark]#Demo#

[.lora]
Let's write a blog post! ðŸ˜ƒ

== Which [.mark]#static site generator# is worth considering?

[.lora]
Is `Hexo` the right choice for me?

[%notitle,transition="none"]
== StaticGen

image::static-gen.png[background,cover]

[%notitle,transition="none"]
== awesome-static-generators

image::awesome-static-generators.png[background,cover]

== Let's summarize

[.lora.text-left.margin-left-100.animation-slide-right]
--
icon:check[role="green"] Create [.mark]**Git** repository to store the [.mark]**source code**

icon:check[role="green"] Pick your favorite format _(`.md`, `.adoc`, etc.)_

icon:check[role="green"] Pick the [.mark]**static site generator** of your preference

icon:check[role="green"] [.mark]**Write** a few first blog posts!
--

== Part 2: the [.mark]#deployment#

[%notitle,transition="none"]
== Github Pages - Cover

image::github-pages.png[background,cover]

[%notitle,transition="none"]
== Github Pages - Repository

image::github-pages-master.png[background,cover]

[%notitle,background-color="{bg1}",transition="none"]
== Github Pages - Deployment configuration

.The deployment configuration in Hexo's `_config.yml` file
[source,yaml]
----
# Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
  repo: git@github.com:wololock/wololock.github.io.git
  branch: master
----

[%notitle,background-color="{bg1}",transition="none"]
== Github Pages - The Deployment

.Executing the deployment command
[source,bash,subs="quotes"]
----
$ *hexo deploy*

Cloning into '.deploy_git'...
...
...
[master 90a80bb] Site updated: 2019-04-16 14:12:17
 167 files changed, 192 insertions(+), 192 deletions(-)
 rewrite 404.html (63%)
 rewrite debugging-teams-book-review/index.html (87%)
 create mode 100644 images/og/debugging-teams2.jpg
To https://github.com/wololock/wololock.github.io.git
   4ac249a..90a80bb  HEAD -> master
INFO  Deploy done: git
----

== What about [.mark]#CICD#[.red]^*^?

[.lora]
Deploy on *commit* and *push*. From *anywhere*.

[.small]
([.red]#*# continuous integration and continuous deployment)

[%notitle,transition="none"]
== Travis

image::travis.png[background,cover]

[%notitle,background-color="{bg1}",transition="none"]
== Travis config

.The content of `.travis.yml` file
[source,yml,role="small"]
----
language: node_js

node_js:
- "6"

branches:
  only:
  - develop

before_install:
- npm install hexo-cli -g
- npm install hexo --save
- npm install

before_script:
- git config --global user.name 'Travis CI'
- git config --global user.email 'bot@travis-ci.org'
- sed -i'' "s~git@github.com:wololock/wololock.github.io.git~https://${GH_TOKEN}:x-oauth-basic@github.com/wololock/wololock.github.io.git~" _config.yml

script:
- hexo generate

deploy:
  skip_cleanup: true
  provider: script
  script: sh deploy.sh
  on:
    branch: develop
----

== Do I need it?

== Nope

== But the benefits are...

[.lora.text-left.margin-left-150.animation-slide-right]
--
icon:check[role="green"] [.mark]**Automated** deployment _(commit, push & go)_

icon:check[role="green"] You can publish blog posts from [.mark]**anywhere**
--


== Part 3: living on [.mark]#production#

== A static HTML [line-through]_does_ doesn't require a [.mark]#sophisticated# web server

[.lora]
Is there anything we should be worry about?

[%notitle,transition="none"]
== Cloudflare intro

image::cloudflare.png[background,cover]

== !

image::cloudflare-diagram-01.png[]

== !

image::cloudflare-diagram-02.png[]

== !

image::cloudflare-00.png[background,cover]

== !

image::cloudflare-01.png[background,cover]

== !

image::cloudflare-02.png[background,cover]

== !

image::cloudflare-03.png[background,cover]

== !

image::cloudflare-04.png[background,cover]

== !

image::cloudflare-05a.png[background,cover]

== URL format [.mark]#matters#

[.text-left.smaller.monospace]
icon:globe[role="grey"] [.grey]#https://#+++e.printstacktrace.blog+++[.grey]#/2019/04/graalvm-and-groovy-how-to-start/#

== URL format [.mark]#matters#

[.text-left.smaller.monospace]
icon:globe[role="grey"] [.grey]#https://#+++e.printstacktrace.blog+++[.grey]#/graalvm-and-groovy-how-to-start/#

[background-color="{bg1}", transition="none"]
== !

.Permlink configuration in Hexo's `_config.yml`
[source,yaml,subs="quotes"]
----
# URL
url: https://e.printstacktrace.blog
root: /
**permalink: :year/:month/:title/**
----

[background-color="{bg1}", transition="none"]
== !

.Permlink configuration in Hexo's `_config.yml`
[source,yaml,subs="quotes"]
----
# URL
url: https://e.printstacktrace.blog
root: /
**permalink: :title/**
----

== Problem: [.mark]*broken* indexed links

[.lora]
It took Google a few days to re-index all pages.

[%notitle,transition="none"]
== Links from GraalVM

image::graalvm-links.png[background,cover]

== !

image::cloudflare-05b.png[background,cover]

== !

image::cloudflare-06.png[background,cover]

== Cloudflare offers you...

[.lora.text-left.margin-left-100.animation-slide-right]
--
icon:check[role="green"] SSL + [.mark]*HTTP/2* _(for better performance)_

icon:check[role="green"] [.mark]*Caching* + global CDN

icon:check[role="green"] Page Rules _(a very limited alternative for [.mark]*mod_rewrite*)_

icon:check[role="green"] Firewall

icon:check[role="green"] Web traffic [.mark]*analytics*
--

[.lora.animation-slide-left]
\... and *much more*



//[%notitle,background-color="{bg1}"]
//== Code
//
//[source,groovy]
//----
//package com.github.wololock
//
//import org.spockframework.runtime.extension.ExtensionAnnotation
//
//import java.lang.annotation.ElementType
//import java.lang.annotation.Retention
//import java.lang.annotation.RetentionPolicy
//import java.lang.annotation.Target
//
//@Retention(RetentionPolicy.RUNTIME)
//@Target(ElementType.TYPE)
//@ExtensionAnnotation(RandomizedOrderExtension)
//@interface RandomizedOrder {}
//----

[.stretch.whoami]
== Thank you!

[.author.animation-slide-left]
image::wololock.jpg[scaledwidth=20%]

[.lora.animation-slide-bottom.text-left.margin-left-200.font-3rem]
--
_That's all, folks!_

Do you have any [.mark]*questions*?
--


[.lora.animation-slide-right.text-left.margin-left-200.margin-top-60]
--
[.mark]*Handout*, slides, and all materials are available:

[.smaller]
*https://github.com/wololock/blogging-from-ide-slides*
--

include::footer.adoc[]